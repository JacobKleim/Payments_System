# Payments System ‚Äî Django Backend

# üè¶ Bank Webhook Handler

Backend-—Å–µ—Ä–≤–∏—Å –Ω–∞ Django –¥–ª—è –ø—Ä–∏—ë–º–∞ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ webhook-–æ–≤ –æ—Ç –±–∞–Ω–∫–∞. –ù–∞—á–∏—Å–ª—è–µ—Ç —Å—É–º–º—É –Ω–∞ –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù, –ª–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∑–∞—â–∏—Ç—É –æ—Ç –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

* –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥—è—â–∏–µ POST-–∑–∞–ø—Ä–æ—Å—ã –æ—Ç –±–∞–Ω–∫–∞
* –ù–∞—á–∏—Å–ª—è–µ—Ç —Å—É–º–º—É –Ω–∞ –±–∞–ª–∞–Ω—Å –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ `payer_inn`
* –°–æ–∑–¥–∞—ë—Ç –∑–∞–ø–∏—Å—å `Payment` (–æ–¥–Ω–∞ –æ–ø–µ—Ä–∞—Ü–∏—è = –æ–¥–∏–Ω `operation_id`)
* –õ–æ–≥–∏—Ä—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ (`BalanceLog`)
* –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å: –ø–æ–≤—Ç–æ—Ä–Ω—ã–π webhook —Å —Ç–µ–º –∂–µ `operation_id` –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
* –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –±–∞–ª–∞–Ω—Å–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –ø–æ –ò–ù–ù

---

## üì¶ –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

* Python 3.9
* Django 4.2.17
* MySQL
* Poetry (Python dependencies)
* Ruff (–ª–∏–Ω—Ç–µ—Ä)
* Docker + Docker Compose

---

### üêç Poetry

   –û–±–Ω–æ–≤–∏—Ç–µ pip:
   ```bash
   pip install --upgrade pip
   ```
   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ pipx:
   ```bash
   pip install pipx
   ```
   –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Poetry (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω):
   ```bash
   pipx install poetry
   ```

---

### üê≥ Docker
- –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞:

    ```bash
    docker-compose up --build
    ```
- –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:

    ```bash
    docker-compose exec web python manage.py migrate
    ```
---


## ‚úÖ –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π

–ü—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ webhook –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è `operation_id`. –ï—Å–ª–∏ Payment —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Äî webhook –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è.

---

